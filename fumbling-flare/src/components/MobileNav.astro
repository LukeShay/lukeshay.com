---
import ChevronDown from "./icons/ChevronDown.astro";
import NavbarLink from "./NavbarLink.astro";

const links = {
  "/": "Home",
  "/about": "About",
  "/contact": "Contact",
};
---

<nav role="navigation" class="sticky pointer-events-auto md:hidden pr-14 top-2">
  <div class="font-medium text-sm text-slate-800 w-[100px] float-right flex">
    <div class="relative">
      <button
        class="w-full dark:border-slate-800 dark:shadow-slate-900 dark:bg-slate-900 dark:text-slate-300 hover:text-cyan-400 border border-slate-900/5 shadow-slate-800/5 shadow-lg rounded-full text-center px-3 py-2 bg-white bg-opacity-95 flex justify-between items-center"
        id="menuToggle"
      >
        <span id="active">{links[Astro.url.pathname] ?? "Home"}</span>
        <ChevronDown class="w-3.5 h-3.5" />
      </button>

      <ul
        id="menu"
        class="w-full hidden absolute dark:border-slate-800 dark:shadow-slate-900 dark:bg-slate-900 dark:text-slate-300 bg-white rounded-lg border border-slate-900/5 shadow-slate-800/5 shadow-lg ease-in-out duration-200"
      >
        <NavbarLink href="/">Home</NavbarLink>
        <NavbarLink href="/projects">Projects</NavbarLink>
        <NavbarLink href="/contact">Contact</NavbarLink>
      </ul>
    </div>
    <slot />
  </div>
</nav>

<script>
  const menuToggle = document.getElementById("menuToggle");
  const menu = document.getElementById("menu");

  menuToggle?.addEventListener("click", () => {
    menu?.classList.toggle("hidden");
  });
</script>
