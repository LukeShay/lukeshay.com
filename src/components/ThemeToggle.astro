---
import Moon from "./icons/Moon.astro"
import Sun from "./icons/Sun.astro"

export interface Props {
	class?: string
}

const { class: className = "" } = Astro.props
---

<button
	class={`themeToggle bg-white dark:border-slate-800 dark:shadow-slate-900 dark:bg-slate-900 dark:text-slate-300 border border-slate-900/5 font-medium text-sm text-slate-800 rounded-lg px-3 py-1.5 hover:text-sky-400 ${className}`}
	type="button"
>
	<Moon class="mx-auto dark:block hidden" />
	<Sun class="mx-auto dark:hidden block" />
	<span class="sr-only">Toggle dark mode</span>
</button>

<script>
	const buttons = document.getElementsByClassName("themeToggle")

	;[...buttons].map((button) => {
		button.addEventListener("click", () => {
			document.body.classList.toggle("dark")

			if (document.body.classList.contains("dark")) {
				localStorage.setItem("theme", "dark")
			} else {
				localStorage.setItem("theme", "light")
			}
		})
	})
</script>
